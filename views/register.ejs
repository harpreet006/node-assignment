<!DOCTYPE HTML>
<html>
	<head>
		<title>Register Page - Industrious by TEMPLATED</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<%-include('templates/headstyle')%>
	</head>
	<body class="is-preload">
		<!-- Header -->
		<%-include('templates/header')%>
		<!-- Heading -->
			<div id="heading" >
				<h1>Register Page</h1>
			</div>
		<!-- Main -->
			<section id="main" class="wrapper">
				<div class="inner">
					<div class="content">						
						<form method="post" enctype="multipart/form-data" action="/save">
							<div class="row gtr-uniform">
								<div class="col-6 col-12-xsmall">
									<input type="text" name="name" id="name" value="" placeholder="Name" />
								</div>
								<div class="col-6 col-12-xsmall">
									<input type="email" name="email" id="email" value="" placeholder="Email" />
								</div>
								<!-- Break -->
								<div class="col-12">
									<script type="text/javascript">
										var category= ['alpha':'Option alpha','beta':'Option beta','gamma':'Option beta','gamma':'Option gamma','delta','Option delta','epsilon','Option epsilon']
										//console.log(category,'&&')
										console.log('*******')
									</script>
									<select name="category" id="category" required="">
										<option value="">- Select -</option>
										<option value="alpha">Option alpha</option>
										<option value="beta">Option beta</option>
										<option value="gamma">Option gamma</option>
										<option value="delta">Option delta</option>
										<option value="epsilon">Option epsilon</option>
										<option value="zeta">Option zeta</option>
										<option value="eta">Option eta</option>
										<option value="theta">Option theta</option>
									</select>
								</div>
								<!-- Break -->
								<div class="col-4 col-12-small">
									<input type="radio" id="radio-alpha" name="radio" value="Radio alpha" checked="">
									<label for="radio-alpha">Radio alpha</label>
								</div>
								<div class="col-4 col-12-small">
									<input type="radio" id="radio-beta" name="radio" value="Radio beta">
									<label for="radio-beta">Radio beta</label>
								</div>
								<div class="col-4 col-12-small">
									<input type="radio" id="radio-gamma" name="radio" value="Radio gamma">
									<label for="radio-gamma">Radio gamma</label>
								</div>
								<!-- Break -->
								<div class="col-6 col-12-small">
									<input type="checkbox" id="checkbox-alpha" name="checkbox" value="Checkbox alpha" required="">
									<label for="checkbox-alpha">Checkbox alpha</label>
								</div>
								<div class="col-6 col-12-small">
									<input type="checkbox" id="checkbox-beta" name="checkbox" value="Checkbox beta">
									<label for="checkbox-beta">Checkbox beta</label>
								</div>
								<!-- Break -->
								<div class="col-12">
									<textarea name="textarea" id="textarea" placeholder="Alpha beta gamma delta" rows="6"></textarea>
								</div>

								<div class="col-12" style="display: -webkit-box">
									<select name="country"  id="category1" required="">
										<option value="">- Select -</option>
										<% for(var a=0;a<country.length;a++) {%>
											<option value="<%=country[a].id%>" data-actiona='<%=country[a].sortname%>' shortn='<%=country[a].sortname%>'><%=country[a].name%></option>
										<%}%>										
									</select>
								</div>
								<div class="col-12">
									<select name="state" id="category"  required="">
																						
									</select>
								</div>

								<div class="col-12">
									<select name="city" id="category" required="">
																						
									</select>
								</div>

								<div class="col-12">
									<input type="file" name="file" required="">
								</div>
								<div class="col-12">
									<input type=password name=password placeholder="password">
								</div>											<!-- Break -->
								<div class="col-12">
									<ul class="actions">
										<li><input type="submit" value="Register" class="primary" /></li>
										<!-- <li><input type="reset" value="Reset" /></li> -->
									</ul>
								</div>
							</div>
						</form>
					</div>
				</div>
			</section>
		<!-- Footer -->
		 <%-include('templates/footer')%>
		 <script type="text/javascript">
		 	function ajaxhit(postaction,inputvalue,fieldname,message,gettext=null){
		 		$.ajax({
		 			method:"POST",
		 			url:postaction,
		 			data:{datakey:inputvalue},
		 			cache:true,
		 			header:{contentType: 'application/json'},
		 			dataType:"text",
		 			success:function(res,responcetext){
		 				let resparse = JSON.parse(res);
		 				let resultget=resparse.result;
		 				if(resultget.length>0){
							let ary=""
							for(var a=0;a<resultget.length;a++){
								ary += "<option value="+resultget[a].id+">"+resultget[a].name+"</option>"
							}
							if(gettext !=""){	
								$("select[name=country]").removeAttr('class')	
								if($("select[name=country]").parents().find('img').length>0){
									$("select[name=country]").parents().find('img').remove()
								}								
								$("select[name=country]").addClass(gettext)
								let imgpath = '/flags/'+gettext+'.png'
								$( "select[name=country]" ).before( "<img style='width: 27px;top: 14px;position: relative;' src='"+imgpath+"'>" )
							}
							$("select[name="+fieldname+"]").html(ary)
						}else{
							$("select[name="+fieldname+"]").html("<option disabled>"+message+"</option>")
						}
		 			},
		 			error:function(err,responce){
		 				console.log("*****");
		 			}
			 	})
		 	}		 
		 	$(document).ready(function(){
		 		$("select[name=country]").change(function(){
			 		let key = $(this).val()
			 		let gettext = $("select[name=country] option:selected").data('actiona');
			 		var optionText = $("#category1 option:selected").text();
			 		$("select[name=state]").html('<option disabled>State not Available</option>')
			 		$("select[name=city]").html('<option disabled>City not Available</option>')
			 		ajaxhit('/getstate',key,'state','No country available',gettext)
			 	})
			 	$("select[name=state]").change(function(){
			 		let key = $(this).val()
			 		ajaxhit('/getcity',key,'city','No state action found','')
			 	})
		 	})
		 </script>
		<!-- Scripts -->
		<%-include('templates/footerjs')%>
	</body>
</html>